{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { MaterialService } from 'src/app/shared/classes/material.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nconst _c0 = [\"start\"];\nconst _c1 = [\"end\"];\nexport let HistoryFilterComponent = /*#__PURE__*/(() => {\n  class HistoryFilterComponent {\n    constructor() {\n      this.onFilter = new EventEmitter();\n      this.isValid = true;\n    }\n\n    ngOnDestroy() {\n      this.start.destroy();\n      this.end.destroy();\n    }\n\n    ngAfterViewInit() {\n      this.start = MaterialService.initDatepicker(this.startRef, this.validate.bind(this));\n      this.end = MaterialService.initDatepicker(this.endRef, this.validate.bind(this));\n    }\n\n    validate() {\n      if (!this.start.date || !this.end.date) {\n        this.isValid = true;\n        return;\n      }\n\n      this.isValid = this.start.date < this.end.date;\n    }\n\n    submitFilter() {\n      const filter = {};\n\n      if (this.order) {\n        filter.order = this.order;\n      }\n\n      if (this.start.date) {\n        filter.start = this.start.date;\n      }\n\n      if (this.end.date) {\n        filter.end = this.end.date;\n      }\n\n      this.onFilter.emit(filter);\n    }\n\n  }\n\n  HistoryFilterComponent.ɵfac = function HistoryFilterComponent_Factory(t) {\n    return new (t || HistoryFilterComponent)();\n  };\n\n  HistoryFilterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HistoryFilterComponent,\n    selectors: [[\"app-history-filter\"]],\n    viewQuery: function HistoryFilterComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.startRef = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.endRef = _t.first);\n      }\n    },\n    outputs: {\n      onFilter: \"onFilter\"\n    },\n    decls: 20,\n    vars: 2,\n    consts: [[1, \"filter\"], [1, \"fr\"], [1, \"col\", \"order\"], [1, \"input-field\", \"inline\", \"order-position-input\"], [\"type\", \"number\", \"id\", \"number\", \"min\", \"1\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"number\"], [1, \"col\", \"filter-pickers\"], [1, \"input-field\"], [\"type\", \"text\"], [\"start\", \"\"], [\"end\", \"\"], [1, \"btn\", \"waves-effect\", \"wavers-light\", \"btn-small\", 3, \"disabled\", \"click\"]],\n    template: function HistoryFilterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function HistoryFilterComponent_Template_input_ngModelChange_4_listener($event) {\n          return ctx.order = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"label\", 5);\n        i0.ɵɵtext(6, \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵelement(9, \"input\", 8, 9);\n        i0.ɵɵelementStart(11, \"label\");\n        i0.ɵɵtext(12, \"\\u041D\\u0430\\u0447\\u0430\\u043B\\u043E\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 7);\n        i0.ɵɵelement(14, \"input\", 8, 10);\n        i0.ɵɵelementStart(16, \"label\");\n        i0.ɵɵtext(17, \"\\u041A\\u043E\\u043D\\u0435\\u0446\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function HistoryFilterComponent_Template_button_click_18_listener() {\n          return ctx.submitFilter();\n        });\n        i0.ɵɵtext(19, \"\\u041F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.order);\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"disabled\", !ctx.isValid);\n      }\n    },\n    directives: [i1.MinValidator, i1.NumberValueAccessor, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgModel],\n    styles: [\"\"]\n  });\n  return HistoryFilterComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}