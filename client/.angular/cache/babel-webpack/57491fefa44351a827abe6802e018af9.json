{"ast":null,"code":"import { switchMap, map } from 'rxjs/operators';\nimport { MaterialService } from '../../shared/classes/material.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../shared/services/positions.service\";\nimport * as i3 from \"../order.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"../../shared/components/loader/loader.component\";\n\nfunction OrderPositionsComponent_div_0_table_1_tr_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelementStart(6, \"div\", 6);\n    i0.ɵɵelementStart(7, \"input\", 7);\n    i0.ɵɵlistener(\"ngModelChange\", function OrderPositionsComponent_div_0_table_1_tr_11_Template_input_ngModelChange_7_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const position_r8 = restoredCtx.$implicit;\n      return position_r8.quantity = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵelementStart(9, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function OrderPositionsComponent_div_0_table_1_tr_11_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const position_r8 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(3);\n      return ctx_r11.addToOrder(position_r8);\n    });\n    i0.ɵɵtext(10, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const position_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(position_r8.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", position_r8.cost, \" \\u0440\\u0443\\u0431.\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", position_r8.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !position_r8.quantity);\n  }\n}\n\nfunction OrderPositionsComponent_div_0_table_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 4);\n    i0.ɵɵelementStart(1, \"thead\");\n    i0.ɵɵelementStart(2, \"tr\");\n    i0.ɵɵelementStart(3, \"th\");\n    i0.ɵɵtext(4, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"\\u0421\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"th\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"tbody\");\n    i0.ɵɵtemplate(11, OrderPositionsComponent_div_0_table_1_tr_11_Template, 11, 4, \"tr\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const positions_r3 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngForOf\", positions_r3);\n  }\n}\n\nfunction OrderPositionsComponent_div_0_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \"\\u0412 \\u0434\\u0430\\u043D\\u043D\\u043E\\u0439 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442 \\u043F\\u043E\\u0437\\u0438\\u0446\\u0438\\u0439.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderPositionsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, OrderPositionsComponent_div_0_table_1_Template, 12, 1, \"table\", 2);\n    i0.ɵɵtemplate(2, OrderPositionsComponent_div_0_ng_template_2_Template, 2, 0, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const positions_r3 = ctx.ngIf;\n\n    const _r5 = i0.ɵɵreference(3);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", positions_r3.length !== 0)(\"ngIfElse\", _r5);\n  }\n}\n\nfunction OrderPositionsComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loader\");\n  }\n}\n\nexport let OrderPositionsComponent = /*#__PURE__*/(() => {\n  class OrderPositionsComponent {\n    constructor(route, positionsService, order) {\n      this.route = route;\n      this.positionsService = positionsService;\n      this.order = order;\n    }\n\n    ngOnInit() {\n      this.positions$ = this.route.params.pipe(switchMap(params => {\n        return this.positionsService.fetch(params['id']);\n      }), map(positions => {\n        return positions.map(position => {\n          position.quantity = 1;\n          return position;\n        });\n      }));\n    }\n\n    addToOrder(position) {\n      MaterialService.toast(`Добавлено x${position.quantity}`);\n      this.order.add(position);\n    }\n\n  }\n\n  OrderPositionsComponent.ɵfac = function OrderPositionsComponent_Factory(t) {\n    return new (t || OrderPositionsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PositionsService), i0.ɵɵdirectiveInject(i3.OrderService));\n  };\n\n  OrderPositionsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderPositionsComponent,\n    selectors: [[\"app-order-positions\"]],\n    decls: 4,\n    vars: 4,\n    consts: [[4, \"ngIf\", \"ngIfElse\"], [\"loader\", \"\"], [\"class\", \"highlight\", 4, \"ngIf\", \"ngIfElse\"], [\"empty\", \"\"], [1, \"highlight\"], [4, \"ngFor\", \"ngForOf\"], [1, \"input-field\", \"inline\", \"order-position-input\"], [\"type\", \"number\", \"value\", \"1\", \"min\", \"1\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"waves-effect\", \"wavers-light\", \"btn-small\", 3, \"disabled\", \"click\"], [1, \"center\"]],\n    template: function OrderPositionsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, OrderPositionsComponent_div_0_Template, 4, 2, \"div\", 0);\n        i0.ɵɵpipe(1, \"async\");\n        i0.ɵɵtemplate(2, OrderPositionsComponent_ng_template_2_Template, 1, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(3);\n\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 2, ctx.positions$))(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [i4.NgIf, i4.NgForOf, i5.MinValidator, i5.NumberValueAccessor, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i6.LoaderComponent],\n    pipes: [i4.AsyncPipe],\n    styles: [\"\"]\n  });\n  return OrderPositionsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}