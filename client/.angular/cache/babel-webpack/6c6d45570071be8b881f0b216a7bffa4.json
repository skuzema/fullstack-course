{"ast":null,"code":"import * as i0 from \"@angular/core\";\nexport let OrderService = /*#__PURE__*/(() => {\n  class OrderService {\n    constructor() {\n      this.list = [];\n      this.price = 0;\n    }\n\n    add(position) {\n      const orderPosition = Object.assign({}, {\n        name: position.name,\n        cost: position.cost,\n        quantity: position.quantity,\n        _id: position._id\n      });\n      const candidate = this.list.find(p => p._id === orderPosition._id);\n\n      if (candidate) {\n        // Изменяем кол-во\n        candidate.quantity += orderPosition.quantity;\n      } else {\n        this.list.push(orderPosition);\n      }\n\n      this.computePrice();\n    }\n\n    remove(orderPosition) {\n      const idx = this.list.findIndex(p => p._id === orderPosition._id);\n      this.list.splice(idx, 1);\n      this.computePrice();\n    }\n\n    clear() {\n      this.list = [];\n      this.price = 0;\n    }\n\n    computePrice() {\n      this.price = this.list.reduce((total, item) => {\n        return total += item.quantity * item.cost;\n      }, 0);\n    }\n\n  }\n\n  OrderService.ɵfac = function OrderService_Factory(t) {\n    return new (t || OrderService)();\n  };\n\n  OrderService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: OrderService,\n    factory: OrderService.ɵfac\n  });\n  return OrderService;\n})();","map":null,"metadata":{},"sourceType":"module"}